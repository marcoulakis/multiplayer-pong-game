(this.webpackJsonppong=this.webpackJsonppong||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(14),i=n.n(s),r=(n(57),n(58),n(10)),o=n(113),l=(n(25),n(1)),d=function(e){var t=Object(a.useState)({}),n=Object(r.a)(t,2);n[0],n[1];return Object(l.jsx)("div",{children:Object(l.jsxs)(o.a.Body,{className:"bg-light",children:[Object(l.jsx)(o.a.Title,{children:"Players List:"}),Object.keys(e.players).map((function(t){return Object(l.jsx)(o.a.Text,{children:e.players[t].name},t)}))]})})},j=n(112),f=n(109),h=n(110),u=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),c=(n[0],n[1],Object(a.useState)("")),s=Object(r.a)(c,2),i=s[0],d=s[1];return Object(a.useEffect)((function(){var e=document.getElementById("chat-message");e.scrollTop=e.scrollHeight}),[e.messages]),Object(a.useEffect)((function(){var e=function(e){switch(e.key){case"Enter":i.trim()||(e.preventDefault(),document.getElementById("sendTheMessage").click())}};return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}),[]),Object(l.jsxs)(o.a,{style:{marginRight:"2%"},className:" bg-light container d-flex flex-column",children:[Object(l.jsx)("div",{id:"chat-message",style:{whiteSpace:"pre-wrap",overflowY:"auto",height:"100vh"},children:Object(l.jsx)(j.a.Text,{style:{whiteSpace:"pre-wrap",fontSize:"1.1rem"},children:e.messages.join("\n")})}),Object(l.jsx)(f.a,{style:{margin:"1%"},className:"d-flex flex-column align-bottom",children:Object(l.jsxs)("div",{className:"form align-bottom d-flex flex-row",children:[Object(l.jsx)(j.a.Control,{className:"align-self-start",type:"text",value:i,onChange:function(e){return d(e.target.value)}}),Object(l.jsx)(h.a,{id:"sendTheMessage",disabled:!i.trim(),style:{marginLeft:"6px"},className:"align-self-end",onClick:function(){var t=i.trim();t?(e.sendMessage(t),d("")):console.log("Message is empty!")},children:"Send"})]})})]})},m=n(51),y=n(7),b=n(48),g=n.n(b),x=c.a.createContext(),O=function(e,t){switch(t.type){case"CONNECTED":return Object(y.a)(Object(y.a)({},e),{},{isConnected:t.payload});case"PLAYERS":return Object(y.a)(Object(y.a)({},e),{},{players:t.payload});case"PLAYER":return Object(y.a)(Object(y.a)({},e),{},{player:t.payload});case"ROOM":return Object(y.a)(Object(y.a)({},e),{},{room:e.rooms[e.players[t.payload].room]});case"ROOMS":return Object(y.a)(Object(y.a)({},e),{},{rooms:t.payload});case"ADD_MESSAGES":return Object(y.a)(Object(y.a)({},e),{},{messages:[].concat(Object(m.a)(e.messages),[t.payload])});case"MATCH":return Object(y.a)(Object(y.a)({},e),{},{match:t.payload});default:return e}},p=g()("https://evening-fortress-93254.herokuapp.com:35270",{autoConnect:!1}),v={isConnected:!1,player:{},room:{},rooms:{},players:{},messages:[],match:{}},w=function(e){var t=Object(a.useReducer)(O,v),n=Object(r.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){p.on("connect",(function(){console.log("Connected!"),s({type:"CONNECTED",payload:!0})})),p.on("disconnect",(function(){s({type:"CONNECTED",payload:!1})})),p.on("PlayerRefresh",(function(e){s({type:"PLAYERS",payload:e}),s({type:"PLAYER",payload:e[p.id]})})),p.on("ReceiveMessage",(function(e){s({type:"ADD_MESSAGES",payload:e})})),p.on("RoomsRefresh",(function(e){s({type:"ROOMS",payload:e}),s({type:"ROOM",payload:p.id})})),p.on("MatchRefresh",(function(e){s({type:"MATCH",payload:e})})),p.open()}),[]),Object(l.jsx)(x.Provider,{value:c,children:e.children})},S=function(e){p.emit("SendMessage",e)},C=function(){p.emit("CreateRoom")},E=function(){p.emit("QuitRoom")},R=function(){p.emit("QuitMatch")},N=void 0,k=n(111),T=function(){var e=Object(a.useContext)(x),t=e.player,n=e.rooms,c=e.room;return Object(l.jsx)(o.a.Header,{style:{width:"100%"},className:"d-flex align-self-center justify-content-center align-items-center bg-light",children:t.room?Object(l.jsxs)("div",{style:{width:"100%"},children:[Object(l.jsx)(o.a.Title,{children:void 0!=c&&c.name}),Object(l.jsx)(h.a,{className:"button-default",variant:"outline-danger",onClick:E,children:"Quit Room"}),n[t.room]&&n[t.room].player1&&n[t.room].player2?Object(l.jsx)(h.a,{className:"button-default",variant:"outline-success",onClick:function(){var e;p.emit("StartGame",e)},children:"Start Game"}):Object(l.jsx)(o.a.Text,{children:"Waiting for another player to join. "})]}):Object(l.jsxs)("div",{style:{display:"grid",width:"100%"},children:[Object(l.jsx)(h.a,{className:"button-default",variant:"outline-secondary",onClick:C,children:"Create Room"}),Object(l.jsx)(o.a.Title,{children:"Rooms:"}),Object.keys(n).map((function(e){return Object(l.jsxs)(o.a.Text,{children:[n[e].name,Object(l.jsx)(h.a,{style:{margin:"0.3rem"},size:"sm",variant:"outline-primary",onClick:function(){return t=e,void p.emit("JoinRoom",t);var t},disabled:n[e].player1&&n[e].player2,children:"Join Room"})]},"room_".concat(e))}))]})})},L=n(11),A=n.n(L),M=function(){var e=Object(a.useContext)(x).match,t=e.gameConfig,n=e.ball,c=e.message,s=e.player1,i=e.player2;return Object(a.useEffect)((function(){p.emit("GameLoaded");var e=function(e){var t=e.key,n=e.type;switch(t){case"ArrowUp":case"ArrowDown":!function(e,t){N!==e&&(N=e,p.emit("SendKey",{type:e,key:t}))}(n,t),e.preventDefault()}};return document.addEventListener("keydown",e),document.addEventListener("keyup",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),[]),Object(l.jsxs)("div",{children:[Object(l.jsxs)(A.a,{width:t.width,height:t.height,children:[Object(l.jsx)(L.Rect,{x:"0",y:"0",width:t.width,height:t.height,style:{fill:"#000"}}),Object(l.jsx)(L.Line,{x1:t.width/2,y1:"0",x2:t.width/2,y2:t.height,"stroke-dasharray":"5,5","stroke-width":"5",style:{stroke:"#ffffff80"}}),Object(l.jsx)("text",{x:t.width/2-20,y:"45",style:{direction:"rtl",fill:"#ffffffB3",fontSize:"50px"},children:e.score1}),Object(l.jsx)("text",{x:t.width/2+20,y:"45",style:{fill:"#ffffffB3",fontSize:"50px"},children:e.score2}),n&&Object(l.jsx)(L.Circle,{cx:n.x,cy:n.y,r:n.width,style:{fill:"#ffffff"}}),s&&Object(l.jsx)(L.Rect,{x:s.x.toString(),y:s.y.toString(),width:s.width.toString(),height:s.height.toString(),style:{fill:"#ffffff"}}),i&&Object(l.jsx)(L.Rect,{x:i.x.toString(),y:i.y.toString(),width:i.width.toString(),height:i.height.toString(),style:{fill:"#ffffff"}})]}),c&&Object(l.jsxs)("div",{className:"game-message",children:[Object(l.jsx)("h4",{children:c}),Object(l.jsx)(h.a,{className:"button-default",variant:"outline-danger",onClick:R,children:"Quit"})]})]})},D=function(){var e=Object(a.useContext)(x),t=e.isConnected,n=e.players,c=e.messages,s=e.match;return Object(l.jsxs)("div",{className:"d-flex flex-row bg-light",style:{margin:"2vh auto",width:"100%",height:"95vh"},children:[!t&&Object(l.jsx)("div",{className:"fixed-top",style:{alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center"},children:Object(l.jsx)(k.a,{style:{margin:"1.2vh",textAlign:"center"},variant:"info",children:"Connecting..."})}),"START"===s.status&&Object(l.jsx)("div",{className:"d-flex flex-row justify-content-center align-items-center flex-wrap game-loaded-container",children:Object(l.jsx)(M,{})}),"PLAY"===s.status&&Object(l.jsx)("div",{className:"d-flex flex-row justify-content-center align-items-center flex-wrap game-loaded-container",children:Object(l.jsx)(M,{})}),"PLAY"!==s.status&&"START"!==s.status&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(f.a,{style:{width:"35%",marginLeft:"2%",height:"95vh"},className:"align-self-start align-items-center bg-light",children:Object(l.jsxs)(o.a,{className:"justify-content-start bg-light",style:{height:"95vh"},children:[Object(l.jsx)(T,{}),Object(l.jsx)(d,{players:n})]})}),Object(l.jsx)(u,{sendMessage:S,messages:c})]})]})};var P=function(){return Object(l.jsx)("div",{className:"App bg-light",children:Object(l.jsx)(w,{children:Object(l.jsx)(D,{})})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(P,{})}),document.getElementById("root")),B()},57:function(e,t,n){},58:function(e,t,n){},86:function(e,t){}},[[107,1,2]]]);
//# sourceMappingURL=main.d621235b.chunk.js.map